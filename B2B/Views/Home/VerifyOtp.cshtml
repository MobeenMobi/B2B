@model string

<div class="d-flex justify-content-center align-items-center" style="min-height:100vh;">
    <div class="card shadow p-4 text-center" style="width: 560px; border-radius: 15px; background-color:#89CFF0; color:white">
        <h4 class="mb-3">Verify OTP</h4>

        <form method="post" asp-action="VerifyOtp">
            <input type="text" name="otp" class="form-control text-center"
                   placeholder="Enter 6-digit OTP" required maxlength="6" />

            <button type="submit" class="btn btn-primary w-100 mt-3">Verify OTP</button>
        </form>

        <div class="mt-3">
            <small>OTP expires in <span id="timer" class="fw-bold"></span></small>
        </div>

        <button id="resendBtn" class="btn btn-link mt-2" disabled>Resend OTP</button>
    </div>
</div>

<script>
    // 5-minute countdown (300 seconds)
    let timeLeft = 300;

    const timerEl = document.getElementById("timer");
    const resendBtn = document.getElementById("resendBtn");

    function updateTimer() {
        let minutes = Math.floor(timeLeft / 60);
        let seconds = timeLeft % 60;
        timerEl.textContent = `${minutes}:${seconds < 10 ? "0" + seconds : seconds}`;

        if (timeLeft <= 0) {
            resendBtn.disabled = false;
            timerEl.textContent = "Expired";
        } else {
            timeLeft--;
            setTimeout(updateTimer, 1000);
        }
    }

    updateTimer();

    resendBtn.addEventListener("click", function () {
        window.location.href = "/Account/SendOtp"; // adjust controller if needed
    });
</script>
